<!DOCTYPE html>
<html lang="{{ .Site.Language.Lang }}">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>{{ if .IsHome }}{{ .Site.Title }} — {{ .Site.Params.description }}{{ else }}{{ .Title }} · {{ .Site.Title }}{{ end }}</title>

  {{/* Per-page or fallback description */}}
  {{ $desc := .Site.Params.description }}
  {{ with .Params.tldr }}{{ $desc = . }}{{ end }}
  {{ with .Description }}{{ $desc = . }}{{ end }}
  <meta name="description" content="{{ $desc }}">

  {{/* Canonical */}}
  <link rel="canonical" href="{{ .Permalink }}">

  {{/* Open Graph */}}
  <meta property="og:type" content="{{ if .IsPage }}article{{ else }}website{{ end }}">
  <meta property="og:title" content="{{ if .IsHome }}{{ .Site.Title }}{{ else }}{{ .Title }}{{ end }}">
  <meta property="og:description" content="{{ $desc }}">
  <meta property="og:url" content="{{ .Permalink }}">
  <meta property="og:site_name" content="{{ .Site.Title }}">
  <meta property="og:locale" content="{{ .Site.Language.Lang }}">
  {{ with .Site.Params.ogImage }}<meta property="og:image" content="{{ . | absURL }}">{{ end }}
  {{ if .IsPage }}<meta property="article:published_time" content="{{ .Date.Format "2006-01-02T15:04:05Z07:00" }}">{{ end }}

  {{/* Twitter Card */}}
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="{{ if .IsHome }}{{ .Site.Title }}{{ else }}{{ .Title }}{{ end }}">
  <meta name="twitter:description" content="{{ $desc }}">
  {{ with .Site.Params.ogImage }}<meta name="twitter:image" content="{{ . | absURL }}">{{ end }}

  {{/* RSS */}}
  {{ with .OutputFormats.Get "RSS" }}<link rel="alternate" type="application/rss+xml" title="{{ $.Site.Title }}" href="{{ .RelPermalink }}">{{ end }}

  {{/* Styles */}}
  <link rel="stylesheet" href="{{ "css/style.css" | relURL }}">

  {{/* JSON-LD structured data */}}
  {{ if .IsPage }}
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "BlogPosting",
    "headline": {{ .Title | jsonify }},
    "description": {{ $desc | jsonify }},
    "datePublished": "{{ .Date.Format "2006-01-02" }}",
    "author": {
      "@type": "Person",
      "name": {{ .Site.Params.author | jsonify }}
    },
    "url": {{ .Permalink | jsonify }}
  }
  </script>
  {{ else if .IsHome }}
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Blog",
    "name": {{ .Site.Title | jsonify }},
    "description": {{ .Site.Params.description | jsonify }},
    "url": {{ .Permalink | jsonify }},
    "author": {
      "@type": "Person",
      "name": {{ .Site.Params.author | jsonify }}
    }
  }
  </script>
  {{ end }}
</head>
<body>
  <header>
    <nav>
      <a href="{{ .Site.BaseURL }}" class="site-title">{{ .Site.Title }}</a>
      {{ if .IsTranslated }}
      <div class="lang-switch">
        {{ range .Translations }}
        <a href="{{ .RelPermalink }}">{{ .Language.LanguageName }}</a>
        {{ end }}
      </div>
      {{ end }}
    </nav>
  </header>
  <main>
    {{ block "main" . }}{{ end }}
  </main>
  <footer>
    <p>{{ .Site.Params.emoji }} {{ .Site.Params.author }} · {{ now.Year }}</p>
  </footer>
</body>
</html>
